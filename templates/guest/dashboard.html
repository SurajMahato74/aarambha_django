{% extends 'guest/base.html' %}

{% block title %}Dashboard{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block content %}
<div class="p-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="bg-slate-800 p-4 rounded-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-slate-400 text-sm">Total Applications</p>
                    <p class="text-2xl font-bold text-white" id="totalApps">0</p>
                </div>
                <i class="fas fa-file-lines text-3xl text-indigo-500"></i>
            </div>
        </div>
        <div class="bg-slate-800 p-4 rounded-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-slate-400 text-sm">Pending</p>
                    <p class="text-2xl font-bold text-yellow-500" id="pendingApps">0</p>
                </div>
                <i class="fas fa-clock text-3xl text-yellow-500"></i>
            </div>
        </div>
        <div class="bg-slate-800 p-4 rounded-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-slate-400 text-sm">Interviews</p>
                    <p class="text-2xl font-bold text-blue-500" id="interviewApps">0</p>
                </div>
                <i class="fas fa-calendar text-3xl text-blue-500"></i>
            </div>
        </div>
    </div>

    <div class="bg-slate-800 rounded-lg p-6">
        <h2 class="text-xl font-bold text-white mb-4">Quick Actions</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <a href="/apply/member/" class="flex items-center gap-4 p-4 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg hover:from-blue-700 hover:to-blue-800">
                <i class="fas fa-user-plus text-2xl text-white"></i>
                <div>
                    <h3 class="text-white font-semibold">Apply as Member</h3>
                    <p class="text-blue-100 text-sm">Submit member application</p>
                </div>
            </a>
            <a href="/apply/volunteer/" class="flex items-center gap-4 p-4 bg-gradient-to-r from-green-600 to-green-700 rounded-lg hover:from-green-700 hover:to-green-800">
                <i class="fas fa-hands-helping text-2xl text-white"></i>
                <div>
                    <h3 class="text-white font-semibold">Apply as Volunteer</h3>
                    <p class="text-green-100 text-sm">Submit volunteer application</p>
                </div>
            </a>
        </div>
    </div>
</div>

<script>
async function loadStats() {
    try {
        const response = await fetchAPI('/api/applications/my-applications/');
        const data = await response.json();
        document.getElementById('totalApps').textContent = data.length;
        document.getElementById('pendingApps').textContent = data.filter(a => a.status === 'pending').length;
        document.getElementById('interviewApps').textContent = data.filter(a => a.status === 'interview_scheduled').length;
    } catch (error) {
        console.error('Error loading stats:', error);
    }
}
loadStats();
</script>
{% endblock %}
